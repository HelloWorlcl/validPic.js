/**
 * validPic.js v.0.0.1 (Alpha) -
 * https://github.com/alvarotrigo/validPic.js
 *
 * Copyright (C) 2013 alvarotrigo.com - A project by Alvaro Trigo
 */
!function(e,n,t,r,i){"function"==typeof define&&define.amd?define(function(){return e.validpic=r(n,t),e.validpic}):"object"==typeof exports?module.exports=r(n,t):e.validpic=r(n,t)}(this,window,document,function(e,n,t){"use strict";function r(){var e=this,t=["png","jpg","jpeg","gif","bmp"];return e.currentFile=null,e.currentInput=null,e.base64=null,e.init=function(){var t=n.querySelectorAll(".valid-pic");t&&[].forEach.call(t,function(n){n.onchange=function(){e.currentFile=n.files[0],e.currentInput=n,e.validExtension()&&e.validMimeType()?e.checkRealMimeType():e.triggerError()},n.onclick=function(){this.value=null}})},e.validExtension=function(){var n=e.currentFile.name.replace(/^.*\./,"");return n=n==e.currentFile.name?"":n.toLowerCase(),t.indexOf(n)>-1},e.validMimeType=function(){return e.currentFile.type.match("image.*")&&t.indexOf(e.currentFile.type.split("/")[1])>-1},e.checkRealMimeType=function(){var n=new FileReader,t=new FileReader;n.readAsArrayBuffer(e.currentFile),n.onloadend=function(r){var i=e.getRealMimeType(n.result);"unknown"!==i?t.readAsDataURL(e.currentFile):e.triggerError()},t.onloadend=function(){e.base64=this.result,e.triggerValid()}},e.getRealMimeType=function(e){for(var n,t=new Uint8Array(e).subarray(0,4),r="",i=0;i<t.length;i++)r+=t[i].toString(16);switch(r){case"89504e47":n="image/png";break;case"47494638":n="image/gif";break;case"ffd8ffDB":case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":case"ffd8ffe3":case"ffd8ffe8":n="image/jpeg";break;default:n="unknown"}return n},e.triggerError=function(){var n=new CustomEvent("error",{detail:{file:e.currentFile,input:e.currentInput,error:i},bubbles:!0,cancelable:!0});e.currentInput.dispatchEvent(n)},e.triggerValid=function(){event=new CustomEvent("success",{detail:{file:e.currentFile,input:e.currentInput,base64:e.base64},bubbles:!0,cancelable:!0}),e.currentInput.dispatchEvent(event)},e}var i="Please upload a valid image file";!function(){function r(e,r){r=r||{bubbles:!1,cancelable:!1,detail:t};var i=n.createEvent("CustomEvent");return i.initCustomEvent(e,r.bubbles,r.cancelable,r.detail),i}return"function"==typeof e.CustomEvent?!1:(r.prototype=e.Event.prototype,void(e.CustomEvent=r))}(),n.addEventListener("DOMContentLoaded",function(){(new r).init()},!1)});
//# sourceMappingURL=validPic.min.js.map
